/*!
 * WaltJS 2.1
 * @author Andy Mikulski <github.com/andymikulski>
 */
(function(e,m,n,p,r){e.Walt=function(k){function k(){this.settings=this.defaults;this.onBefores=[];this.onAfters=[];this.onBeforeEaches=[];this.onAfterEaches=[];return this}function h(a){a.indexOf&&(-1<a.indexOf("ms")||-1<a.indexOf("s"))||(a+="ms");return a}function q(a){return{"-webkit-animation":a||"",animation:a||""}}k.prototype={defaults:{element:n(m.body||m.documentElement),animation:"fadeIn",delay:"0s",duration:"1s",count:1,fill:"both",direction:"normal",timing:"ease",state:"paused"},target:function(a){if("undefined"===
typeof a)return this.settings.element;if(a)return a=a instanceof n?a:n(a),this.settings.element=a,this},name:function(a){if("undefined"===typeof a)return this.settings.animation;this.settings.animation=a;return this},fill:function(a){if("undefined"===typeof a)return this.settings.fill;this.settings.fill=a||"none";return this},direction:function(a){if("undefined"===typeof a)return this.settings.direction;this.settings.direction=a||"forward";return this},timing:function(a){if("undefined"===typeof a)return this.settings.timing;
this.settings.timing=a||"linear";return this},duration:function(a){if("undefined"===typeof a)return this.settings.duration;this.settings.duration=h(a);return this},delay:function(a){if("undefined"===typeof a)return this.settings.delay;this.settings.delay=h(a);return this},count:function(a){if("undefined"===typeof a)return this.settings.count;this.settings.count=a;return this},before:function(a){var b=this;if(!a)return b.onBefores;b.onBefores.push(function(c){a&&a(b.settings.element,b.settings);c&&
c(null,null)});return b},beforeEach:function(a){var b=this;if(!a)return b.onBeforeEaches;b.onBeforeEaches.push(function(c){a&&a(b.settings.element,b.settings);c&&c(null,null)});return b},after:function(a){var b=this;if(!a)return b.onAfters;b.onAfters.push(function(c){a&&a(b.settings.element,b.settings);c&&c(null,null)});return b},then:function(a){return this.after(a)},done:function(a){return this.after(a)},afterEach:function(a){var b=this;if(!a)return b.onAfterEaches;b.onAfterEaches.push(function(c){a&&
a(b.settings.element,b.settings);c&&c(null,null)});return b},pause:function(){this.settings.state="paused";return this},play:function(){this.settings.state="running";return this},resume:function(){this.settings.state="running";return this},animate:function(){p.parallel(this.onBefores,this._executeAnim.bind(this));return this},fork:function(a){var b=new k,c;for(c in this)if(a||"onBefores"!==c&&"onAfters"!==c&&"onBeforeEaches"!==c&&"onAfterEaches"!==c)b[c]=this[c];return b},_executeAnim:function(){this.play();
var a=this.settings,a=a.animation+" "+a.duration+" "+a.timing+" "+a.delay+" "+a.count+" "+a.direction+" "+a.fill+" "+a.state;this.animCount=0;this.animMax=this.settings.element.length;this.settings.element.unbind("animationend.walt").on("animationend.walt",this._onAnimEndEvent.bind(this));this.settings.element.css(q(a));return this},_onAnimEndEvent:function(a){var b=this;a=n(a.currentTarget);a.unbind("animationend.walt");a.css(q());b.animCount+=1;p.parallel(b.onAfterEaches,function(){b.animCount>
b.animMax&&b._onAnimComplete()});return b},_onAnimComplete:function(){var a=this;p.parallel(a.onAfters,function(){delete a.animCount;delete a.animMax;a.settings.element.css(q())});return a},easings:{"default":{linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)"},"in":{quad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",
cubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",quart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",quint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",sine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",expo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",circ:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",back:"cubic-bezier(0.600, -0.280, 0.735, 0.045)"},out:{quad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",cubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",quart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",quint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",
sine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",expo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",circ:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",back:"cubic-bezier(0.175, 0.885, 0.320, 1.275)"},inOut:{quad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",cubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",quart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",quint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",sine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",expo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",circ:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",
back:"cubic-bezier(0.680, -0.550, 0.265, 1.550)"}},settingsFromObject:function(a,b,c){var d=this;c&&(d=d.fork());for(var f in a){var l;c=a[f];if(a.hasOwnProperty(f)&&"undefined"!==typeof c){switch(f){case "animation":f="name";break;case "el":f="target";break;case "onBefore":f="before";break;case "onComplete":f="then"}(l=d[f])&&"function"===typeof l?l.call(d,c):console&&console.warn&&console.warn("Walt : could not convert old setting "+f)}}return b?d.animate():d},_findKeyframesRule:function(a){var b=
m.styleSheets;if(!b)return null;for(var c=0;c<b.length;++c)if(b[c].cssRules)for(var d=0;d<b[c].cssRules.length;++d)if((b[c].cssRules[d].type==e.CSSRule.WEBKIT_KEYFRAMES_RULE||b[c].cssRules[d].type==e.CSSRule.MOZ_KEYFRAMES_RULE||b[c].cssRules[d].type==e.CSSRule.KEYFRAMES_RULE)&&b[c].cssRules[d].name==a)return b[c].cssRules[d];return null},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},_findAnimationKeyframes:function(a){var b=[],c;a=a.split(" ");for(var d=0;d<a.length;d++)(c=this._findKeyframesRule(a[d]))&&
b.push(c);return b},_mergeAnimationKeyframes:function(a){for(var b={},c,d,f,l,e,g,k,h=0;h<a.length;h++)if((c=a[h])&&c.cssRules)for(d in c.cssRules)if(d&&c[d])for(f=c[d],k=f.keyText.split(","),l=k.length-1;0<=l;l--){e=b[k[l]]||{};for(g in f.style)"string"!==typeof f.style[g]||""===f.style[g]||"cssText"===g||"length"===g||this.isNumber(g)||(e[g]&&""!==e[g]&&(this.isNumber(e[g])?e[g]=Number(e[g])+Number(f.style[g]):(-1<g.toLowerCase().indexOf("transform")&&e[g].split(" "),e[g]+=f.style[g])),e[g]=f.style[g]);
b[k[l]]=e}return b},compose:function(a,b,c){if(!b)return console&&console.warn&&console.warn("Walt : compose : two arguments are required"),d;var d=this,f=d._findAnimationKeyframes(b);if(f&&f.length){b=d._mergeAnimationKeyframes(f);b=d._objectToAnimationString(a,b);if(c)return b;d.settings.animation=a;return d}console&&console.warn&&console.warn("Walt : compose : no animations found",b)},_objectToAnimationString:function(a,b){var c="",d;for(d in b){var c=c+("\t"+d+"{ \n"),f;for(f in b[d])c+="\t\t"+
f+": "+b[d][f]+";\n";c+="\t} \n"}d=["@","@-webkit-"];c="keyframes "+a+" { \n"+c+"\n}";f=[];for(var e=d.length-1;0<=e;e--)f.push(d[e]+c);this._insertNewRules(f);return f.join("\n\n")},_insertNewRules:function(a){var b=m.styleSheets;if(!b)return!1;for(var b=b[b.length-1],c=a.length-1;0<=c;c--)b.insertRule(a[c],0);return!0}};return k}(e.Walt||{});e.Walt.animate=function(e){return(new Walt).settingsFromObject(e,!0)};e.Walt.easings=e.Walt.ease=e.Walt.prototype.easings;e.Walt.compose=function(e,h){return(new Walt).compose(e,
h,!0)};e.Walt.getKeyframes=function(e){var h=new Walt;return h._mergeAnimationKeyframes(h._findAnimationKeyframes(e))}})(window,document,jQuery,async);